#!/usr/bin/env zsh
set +o pipefail

# support bash completion
autoload bashcompinit
bashcompinit

# start xorg
if [[ -t 0 && $(tty) == "/dev/tty1" && ! $DISPLAY ]]; then
  exec startx
fi

# start tmux
export ZSH_TMUX_AUTOSTART=true

# fzf configuration
export FZF_BASE="$(brew --prefix)/opt/fzf"
export FZF_DEFAULT_COMMAND=fd

# zplug
export ZPLUG_HOME="$(brew --prefix)/opt/zplug"
source "$ZPLUG_HOME/init.zsh"

zplug "jackharrisonsherlock/common", as:theme, from:github
zplug "plugins/tmux", as:plugin, from:oh-my-zsh
zplug "plugins/asdf", as:plugin, from:oh-my-zsh
zplug "plugins/kubectl", as:plugin, from:oh-my-zsh
zplug "plugins/fzf", as:plugin, from:oh-my-zsh
zplug "plugins/git", as:plugin, from:oh-my-zsh
zplug "plugins/gpg-agent", as:plugin, from:oh-my-zsh
zplug "zsh-users/zsh-autosuggestions", as:plugin, from:github
zplug "zsh-users/zsh-syntax-highlighting", as:plugin, from:github

if ! zplug check; then
  zplug install
fi

zplug load || echo "Help: Run 'zplug load --verbose for more information"

### BEGIN MY MODIFICATIONS

# custom prompt
PROMPT="%{$fg[cyan]%}日本 $PROMPT"

# general aliases
if command -v bat >/dev/null 2>&1; then
  alias cat='bat --tabs 2'
fi

# Go
export GOPATH="$HOME/go"
